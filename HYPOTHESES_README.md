# Система Гипотез и CVR Анализа

## Обзор

В проект добавлена инфраструктура для интеграции с ChatGPT для персонализированных рекомендаций по улучшению воронки поиска работы. Система анализирует CVR (Conversion Rate) метрики пользователя и предлагает релевантные гипотезы для оптимизации.

## Файловая структура

### hypotheses.xlsx
- **Описание**: Excel файл с 610 гипотезами для оптимизации поиска работы
- **Структура**: 
  - `h_topic`: Тема гипотезы (например, "Гипотезы для Middle PM")
  - `hid`: Уникальный идентификатор гипотезы
  - `name`: Полное описание гипотезы с конкретными рекомендациями
- **Использование**: Источник персонализированных рекомендаций для пользователей

### hypotheses_manager.py
- **Назначение**: Модуль для работы с Excel файлом гипотез
- **Функциональность**:
  - Загрузка и парсинг hypotheses.xlsx
  - Анализ CVR данных пользователя
  - Подготовка промптов для ChatGPT
  - Форматирование гипотез для AI анализа

### cvr_analyzer.py
- **Назначение**: Анализатор производительности CVR метрик
- **Функциональность**:
  - Сравнение с индустриальными бенчмарками
  - Анализ трендов по неделям
  - Выявление проблемных областей и сильных сторон
  - Подготовка контекста для ChatGPT интеграции

## Индустриальные Бенчмарки CVR

Система использует следующие бенчмарки для сравнения:

| Метрика | Критический | Низкий | Хороший | Отличный |
|---------|-------------|--------|---------|----------|
| CVR1 (Ответы/Подачи) | <5% | 5-15% | 15-25% | >25% |
| CVR2 (Скрининги/Ответы) | <20% | 20-40% | 40-60% | >60% |
| CVR3 (Онсайты/Скрининги) | <30% | 30-60% | 60-80% | >80% |
| CVR4 (Офферы/Онсайты) | <15% | 15-35% | 35-55% | >55% |

## Планируемая Интеграция с ChatGPT

### Следующая итерация будет включать:

1. **API интеграция**: Подключение к OpenAI ChatGPT API
2. **Персонализированные рекомендации**: Анализ данных пользователя и подбор релевантных гипотез
3. **Коучинг чат-бот**: Интерактивные советы по улучшению воронки
4. **A/B тестирование**: Отслеживание эффективности примененных гипотез

### Пример рабочего процесса:

1. Пользователь добавляет данные за неделю
2. Система анализирует CVR метрики
3. Определяются проблемные области
4. Подбираются релевантные гипотезы из базы
5. ChatGPT генерирует персонализированные рекомендации
6. Пользователь получает конкретные шаги для улучшения

## Структура данных для ChatGPT

### Входные данные:
```json
{
  "user_performance": {
    "cvr1_responses": {"value": 12.5, "benchmark": "low"},
    "cvr2_screenings": {"value": 45.0, "benchmark": "good"},
    "trends": {"cvr1": "declining", "cvr2": "improving"},
    "problem_areas": ["Низкий отклик на подачи"],
    "strengths": ["Хорошее прохождение скринингов"]
  },
  "relevant_hypotheses": [
    "Если в заголовке LinkedIn указать конкретный стек...",
    "Если в Summary сделать акцент на успешном запуске..."
  ]
}
```

### Ожидаемый выход:
```
1. АНАЛИЗ: Основная проблема - низкий CVR1 (12.5% vs 15% бенчмарк)
2. ПРИОРИТЕТЫ: 
   - Оптимизация заголовка LinkedIn
   - Улучшение сопроводительных писем
3. РЕКОМЕНДАЦИИ:
   - Шаг 1: Добавить конкретный стек в заголовок
   - Шаг 2: Переписать Summary с фокусом на результаты
4. РЕЗУЛЬТАТ: Ожидаемый рост CVR1 до 18-20%
5. ПЛАН: Тестировать изменения 2 недели, затем анализ
```

## Технические требования

### Зависимости:
- `pandas`: Обработка Excel данных
- `openpyxl`: Чтение Excel файлов
- `openai`: ChatGPT API (планируется)

### Секретные ключи (для следующей итерации):
- `OPENAI_API_KEY`: Для доступа к ChatGPT API

## Использование

### Текущая функциональность:
```python
from hypotheses_manager import HypothesesManager, get_hypotheses_for_user
from cvr_analyzer import analyze_user_cvr

# Анализ пользователя
analysis = analyze_user_cvr(user_id=12345)
print(analysis['cvr_performance'])

# Подготовка промпта для ChatGPT
manager = HypothesesManager()
prompt = manager.prepare_chatgpt_prompt(user_id=12345)
```

### Планируемая функциональность:
```python
# В следующей итерации
from chatgpt_integration import get_personalized_recommendations

recommendations = get_personalized_recommendations(
    user_id=12345,
    include_action_plan=True
)
```

## Статус

- ✅ **Готово**: Инфраструктура модулей
- ✅ **Готово**: Загрузка и парсинг гипотез
- ✅ **Готово**: CVR анализ и бенчмарки
- ⏳ **Планируется**: ChatGPT API интеграция
- ⏳ **Планируется**: Пользовательский интерфейс в боте
- ⏳ **Планируется**: A/B тестирование результатов